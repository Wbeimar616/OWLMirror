{
  "entities": {
    "Receiver": {
      "title": "Receiver",
      "description": "Represents a device available to receive a screen share, like a TV. It also contains the WebRTC session data.",
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "A display name for the receiver device."
        },
        "status": {
          "type": "string",
          "description": "The current status of the receiver.",
          "enum": ["available", "connecting", "connected", "disconnected"]
        },
        "offer": {
          "type": "object",
          "description": "The SDP offer from the initiating peer (the sharer)."
        },
        "answer": {
          "type": "object",
          "description": "The SDP answer from the receiving peer (the TV)."
        },
        "sharerDeviceName": {
            "type": "string",
            "description": "The name of the device that is sharing the screen."
        }
      },
      "required": ["name", "status"]
    },
    "IceCandidate": {
        "title": "ICE Candidate",
        "description": "A candidate for establishing the WebRTC peer-to-peer connection.",
        "type": "object",
        "properties": {
            "candidate": { "type": "string" },
            "sdpMid": { "type": "string" },
            "sdpMLineIndex": { "type": "number" }
        },
        "required": ["candidate", "sdpMid", "sdpMLineIndex"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "/receivers/{receiverId}": {
      "schema": { "$ref": "#/backend/entities/Receiver" },
      "description": "A collection of WebRTC receiver devices (e.g., TVs)."
    },
    "/receivers/{receiverId}/callerCandidates/{candidateId}": {
        "schema": { "$ref": "#/backend/entities/IceCandidate" },
        "description": "ICE candidates from the peer that initiated the call."
    },
    "/receivers/{receiverId}/calleeCandidates/{candidateId}": {
        "schema": { "$ref": "#/backend/entities/IceCandidate" },
        "description": "ICE candidates from the peer that answered the call."
    }
  }
}
